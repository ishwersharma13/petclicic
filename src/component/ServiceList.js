import { useEffect, useState } from "react";
import { Link, useNavigate } from "react-router-dom";

const ServiceList = () => {
    const [serdata, serdatachange] = useState(null);
    const navigate = useNavigate();

    const LoadDetail = (id) => {
        navigate("/services/detail/" + id);
    }
    const LoadEdit = (id) => {
        navigate("/services/edit/" + id);
    }
    const Removefunction = (id) => {
        if (window.confirm('Do you want to remove?')) {
            fetch("http://localhost:3000/services/" + id, {
                method: "DELETE"
            }).then((res) => {
                alert('Removed successfully.')
                window.location.reload();
            }).catch((err) => {
                console.log(err.message)
            })
        }
    }

    useEffect(() => {
        fetch("http://localhost:3000/services").then((res) => {
            return res.json();
        }).then((resp) => {
            serdatachange(resp);
        }).catch((err) => {
            console.log(err.message);
        })
    }, [])
    return (
        <div className="container pt-50">
            <div className="card">
                
                <div className="card-body">
                    <div className="divbtn">
                    <h2>Service Listing</h2>
                        <Link to="/screate" className="btn btn-success">Add New  </Link>
                    </div>
                    <table className="table table-bordered">
                        <thead className="bg-dark text-white">
                            <tr>
                                <td>ID</td>
                                <td>Service Name</td>
                                <td>Price</td>
                                <td>Action</td>
                            </tr>
                        </thead>
                        <tbody>

                            {serdata &&
                                serdata.map(item => (
                                    <tr key={item.id}>
                                        <td>{item.id}</td>
                                        <td>{item.name}</td>
                                        <td>{item.price}</td>
                                       
                                        <td>
                      <a
                        onClick={() => {
                          LoadEdit(item.id);
                        }}
                        className="btn btn-success"
                      >
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 20 20"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M1.25 16.25H18.75V17.5H1.25V16.25ZM15.875 5.625C16.375 5.125 16.375 4.375 15.875 3.875L13.625 1.625C13.125 1.125 12.375 1.125 11.875 1.625L2.5 11V15H6.5L15.875 5.625ZM12.75 2.5L15 4.75L13.125 6.625L10.875 4.375L12.75 2.5ZM3.75 13.75V11.5L10 5.25L12.25 7.5L6 13.75H3.75Z"
                            fill="black"
                          />
                        </svg>
                      </a>
                      <a
                        onClick={() => {
                          Removefunction(item.id);
                        }}
                        className="btn btn-danger"
                      >
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 20 20"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M3.125 5.00003H1.875C1.70924 5.00003 1.55027 4.93418 1.43306 4.81697C1.31585 4.69976 1.25 4.54079 1.25 4.37503C1.25 4.20927 1.31585 4.0503 1.43306 3.93309C1.55027 3.81588 1.70924 3.75003 1.875 3.75003H6.875V1.87378C6.875 1.70802 6.94085 1.54905 7.05806 1.43184C7.17527 1.31463 7.33424 1.24878 7.5 1.24878H12.5C12.6658 1.24878 12.8247 1.31463 12.9419 1.43184C13.0592 1.54905 13.125 1.70802 13.125 1.87378V3.75003H18.125C18.2908 3.75003 18.4497 3.81588 18.5669 3.93309C18.6842 4.0503 18.75 4.20927 18.75 4.37503C18.75 4.54079 18.6842 4.69976 18.5669 4.81697C18.4497 4.93418 18.2908 5.00003 18.125 5.00003H16.875V18.125C16.875 18.2908 16.8092 18.4498 16.6919 18.567C16.5747 18.6842 16.4158 18.75 16.25 18.75H3.75C3.58424 18.75 3.42527 18.6842 3.30806 18.567C3.19085 18.4498 3.125 18.2908 3.125 18.125V5.00003ZM11.875 3.75003V2.50003H8.125V3.75003H11.875ZM4.375 17.5H15.625V5.00003H4.375V17.5ZM8.125 15C7.95924 15 7.80027 14.9342 7.68306 14.817C7.56585 14.6998 7.5 14.5408 7.5 14.375V8.12503C7.5 7.95927 7.56585 7.8003 7.68306 7.68309C7.80027 7.56588 7.95924 7.50003 8.125 7.50003C8.29076 7.50003 8.44973 7.56588 8.56694 7.68309C8.68415 7.8003 8.75 7.95927 8.75 8.12503V14.375C8.75 14.5408 8.68415 14.6998 8.56694 14.817C8.44973 14.9342 8.29076 15 8.125 15ZM11.875 15C11.7092 15 11.5503 14.9342 11.4331 14.817C11.3158 14.6998 11.25 14.5408 11.25 14.375V8.12503C11.25 7.95927 11.3158 7.8003 11.4331 7.68309C11.5503 7.56588 11.7092 7.50003 11.875 7.50003C12.0408 7.50003 12.1997 7.56588 12.3169 7.68309C12.4342 7.8003 12.5 7.95927 12.5 8.12503V14.375C12.5 14.5408 12.4342 14.6998 12.3169 14.817C12.1997 14.9342 12.0408 15 11.875 15Z"
                            fill="black"
                          />
                        </svg>
                      </a>
                      <a
                        onClick={() => {
                          LoadDetail(item.id);
                        }}
                        className="btn btn-primary"
                      >
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 20 20"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M19.3372 9.7875C18.6021 7.88603 17.326 6.24164 15.6665 5.05755C14.007 3.87347 12.0369 3.20161 9.99974 3.125C7.96256 3.20161 5.99248 3.87347 4.33299 5.05755C2.67349 6.24164 1.39733 7.88603 0.662234 9.7875C0.612589 9.92482 0.612589 10.0752 0.662234 10.2125C1.39733 12.114 2.67349 13.7584 4.33299 14.9424C5.99248 16.1265 7.96256 16.7984 9.99974 16.875C12.0369 16.7984 14.007 16.1265 15.6665 14.9424C17.326 13.7584 18.6021 12.114 19.3372 10.2125C19.3869 10.0752 19.3869 9.92482 19.3372 9.7875ZM9.99974 15.625C6.68723 15.625 3.18723 13.1688 1.91848 10C3.18723 6.83125 6.68723 4.375 9.99974 4.375C13.3122 4.375 16.8122 6.83125 18.081 10C16.8122 13.1688 13.3122 15.625 9.99974 15.625Z"
                            fill="black"
                          />
                          <path
                            d="M10 6.25C9.25832 6.25 8.5333 6.46993 7.91661 6.88199C7.29993 7.29404 6.81928 7.87971 6.53545 8.56494C6.25162 9.25016 6.17736 10.0042 6.32206 10.7316C6.46675 11.459 6.8239 12.1272 7.34835 12.6517C7.8728 13.1761 8.54098 13.5333 9.26841 13.6779C9.99584 13.8226 10.7498 13.7484 11.4351 13.4645C12.1203 13.1807 12.706 12.7001 13.118 12.0834C13.5301 11.4667 13.75 10.7417 13.75 10C13.75 9.00544 13.3549 8.05161 12.6517 7.34835C11.9484 6.64509 10.9946 6.25 10 6.25ZM10 12.5C9.50555 12.5 9.0222 12.3534 8.61108 12.0787C8.19995 11.804 7.87952 11.4135 7.6903 10.9567C7.50108 10.4999 7.45158 9.99723 7.54804 9.51227C7.6445 9.02732 7.8826 8.58186 8.23223 8.23223C8.58187 7.8826 9.02732 7.6445 9.51228 7.54804C9.99723 7.45157 10.4999 7.50108 10.9567 7.6903C11.4135 7.87952 11.804 8.19995 12.0787 8.61107C12.3534 9.0222 12.5 9.50555 12.5 10C12.5 10.663 12.2366 11.2989 11.7678 11.7678C11.2989 12.2366 10.663 12.5 10 12.5Z"
                            fill="black"
                          />
                        </svg>
                      </a>
                    </td>
                                    </tr>
                                ))
                            }

                        </tbody>

                    </table>
                </div>
            </div>
        </div>
    );
}

export default ServiceList;